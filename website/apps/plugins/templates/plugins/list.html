{% extends "layout/main.html" %}

{% block content %}
  <h1>Plugins list</h1>
  <form method="get" action="">
    <label for="search_input">Search :</label>
    <input value="{{ request.GET.search }}" type="text" name="search" id="search_input" />
    <input type="submit" />
  </form>
  <hr />
  <div>
    {% for plugin in object_list %}
      <div>
        <a href="{{ plugin.url }}">{{ plugin.name }}</a>
        <p>{{ plugin.last_release.description }}</p>
        <span>{{ plugin.nb_upvote }} Upvotes</span>
        <p>by <a href="{{ plugin.author.profile_url }}">{{ plugin.author.username }}</a></p>
      </div>
      <hr />
    {% endfor %}
  </div>

  {% if is_paginated %}
    <div class="pagination">
      <span class="step-links">
          {% if page_obj.has_previous %}
              <a href="?page={{ page_obj.previous_page_number }}">previous</a>
          {% endif %}

          <span class="current">
              Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}.
          </span>

          {% if page_obj.has_next %}
              <a href="?page={{ page_obj.next_page_number }}">next</a>
          {% endif %}
      </span>
    </div>
  {% endif %}
{% endblock %}
